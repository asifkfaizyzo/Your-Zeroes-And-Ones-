generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


/// --- Add these models at the bottom of prisma/schema.prisma ---

model Blog {
  id           String   @id @default(uuid())
  slug         String   @unique
  title        String
  excerpt      String?
  content      String   // canonical Markdown
  content_html String?  // last-saved HTML (optional)
  author       String?
  readTime     String?
  tags         String[] @default([])
  image        String?   // featured image URL (relative or absolute)
  published    Boolean  @default(false)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Admin {
  id           String   @id @default(uuid())
  username     String   @unique
  passwordHash String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

// prisma/schema.prisma
// Add this model to your existing schema

model Testimonial {
  id            String   @id @default(uuid())
  name          String
  role          String
  company       String?
  message       String   @db.Text
  quoteExcerpt  String?  @db.VarChar(300)  // Short quote for video testimonials
  image         String?                     // Profile/avatar image
  videoUrl      String?                     // Uploaded video file path
  thumbnailUrl  String?                     // Custom video thumbnail
  rating        Int      @default(5)
  verified      Boolean  @default(false)
  position      Int?
  published     Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

// prisma/schema.prisma - Update Portfolio model

model Portfolio {
  id               Int      @id @default(autoincrement())
  slug             String   @unique
  title            String
  shortDescription String   @db.Text
  fullDescription  String   @db.Text

  // âœ… Changed: Array of category-subcategory pairs
  categories       Json     @default("[]")  // [{category: "Branding & Design", subCategory: "Graphic Design"}, ...]

  // Images
  image            String?
  images           String[]
  features         String[]

  // Hidden fields (stored but not exposed in public API)
  client           String?
  duration         String?
  year             String?
  website          String?
  technologies     String[]
  results          Json?    @default("[]")
  testimonial      Json?

  featured         Boolean  @default(false)
  published        Boolean  @default(false)
  position         Int?

  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([published])
  @@index([featured])
}


// prisma/schema.prisma
// Add this model with your existing ones

model Client {
  id        String   @id @default(uuid())
  name      String
  logo      String?        // Uploaded logo image path (via /api/upload)
  color     String?        // Hex color code for hover effects
  position  Int?           // Manual sort order (optional)
  published Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// prisma/schema.prisma
model TeamMember {
  id          String   @id @default(cuid())
  name        String
  role        String
  image       String?
  description String?
  linkedin    String?
  twitter     String?
  position    Int?
  published   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}


// ============================================
// ABOUT PAGE MANAGEMENT MODELS
// ============================================

model AboutContent {
  id              String   @id @default(uuid())
  badge           String   @default("Who We Are")
  title           String   @default("Crafting Digital")
  highlightedText String   @default("Excellence")
  paragraph1      String   @db.Text
  paragraph2      String   @db.Text
  media           String?  // image or video URL (relative path)
  mediaType       String   @default("image") // "image" or "video"
  
  // Stats stored as JSON array
  // Example: [{"value":"50+","label":"Projects Completed","icon":"CheckCircle"}]
  stats           Json     @default("[{\"value\":\"50+\",\"label\":\"Projects Completed\",\"icon\":\"CheckCircle\"},{\"value\":\"15+\",\"label\":\"Years Experience\",\"icon\":\"Calendar\"},{\"value\":\"30+\",\"label\":\"Happy Clients\",\"icon\":\"Users\"},{\"value\":\"24/7\",\"label\":\"Support\",\"icon\":\"Clock\"}]")
  
  published       Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model Timeline {
  id          String   @id @default(uuid())
  year        String
  title       String
  description String   @db.Text
  icon        String   @default("Rocket") // Lucide icon name
  position    Int      // For ordering (1, 2, 3, 4...)
  published   Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([position])
  @@index([published])
}